import{a as P,b as G}from"./chunk-TKWLQXEQ.js";import{$ as Ce,A as U,B as q,C as ot,E as ve,F as V,G as D,H as _e,I as x,J as I,K as m,L as o,M as s,N as u,O as y,P as h,Q as f,R as Le,S as ne,T as l,U as b,V as C,W as O,X as M,Y as st,Z as re,_ as ye,a as A,aa as be,b as T,ba as j,c as tt,ca as oe,d as it,da as $e,e as nt,ea as Ve,f as rt,fa as at,g as fe,h as te,j as $,k as H,ka as De,m as v,ma as we,n as _,na as lt,o as ie,oa as He,q as ge,qa as R,r as je,ra as p,s as Ge,sa as S,t as w,ta as E,u as a,v as Be,w as c,x as g,y as W,z as N}from"./chunk-LCZN2JGG.js";var gt=(()=>{class i{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,n){this._renderer=e,this._elementRef=n}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(n){return new(n||i)(c(Be),c(Ge))};static \u0275dir=N({type:i})}return i})(),Kt=(()=>{class i extends gt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=je(i)))(r||i)}})();static \u0275dir=N({type:i,features:[U]})}return i})(),vt=new H("");var Xt={provide:vt,useExisting:te(()=>X),multi:!0};function Jt(){let i=$e()?$e().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Qt=new H(""),X=(()=>{class i extends gt{_compositionMode;_composing=!1;constructor(e,n,r){super(e,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Jt())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(n){return new(n||i)(c(Be),c(Ge),c(Qt,8))};static \u0275dir=N({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&h("input",function(F){return r._handleInput(F.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(F){return r._compositionEnd(F.target.value)})},standalone:!1,features:[re([Xt]),U]})}return i})();function Ye(i){return i==null||Ze(i)===0}function Ze(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var Ke=new H(""),_t=new H(""),ei=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,B=class{static min(t){return ti(t)}static max(t){return ii(t)}static required(t){return ni(t)}static requiredTrue(t){return ri(t)}static email(t){return oi(t)}static minLength(t){return si(t)}static maxLength(t){return yt(t)}static pattern(t){return ai(t)}static nullValidator(t){return Se()}static compose(t){return Mt(t)}static composeAsync(t){return Et(t)}};function ti(i){return t=>{if(t.value==null||i==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function ii(i){return t=>{if(t.value==null||i==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function ni(i){return Ye(i.value)?{required:!0}:null}function ri(i){return i.value===!0?null:{required:!0}}function oi(i){return Ye(i.value)||ei.test(i.value)?null:{email:!0}}function si(i){return t=>{let e=t.value?.length??Ze(t.value);return e===null||e===0?null:e<i?{minlength:{requiredLength:i,actualLength:e}}:null}}function yt(i){return t=>{let e=t.value?.length??Ze(t.value);return e!==null&&e>i?{maxlength:{requiredLength:i,actualLength:e}}:null}}function ai(i){if(!i)return Se;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(Ye(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Se(i){return null}function Ct(i){return i!=null}function bt(i){return ot(i)?nt(i):i}function Vt(i){let t={};return i.forEach(e=>{t=e!=null?A(A({},t),e):t}),Object.keys(t).length===0?null:t}function Dt(i,t){return t.map(e=>e(i))}function li(i){return!i.validate}function wt(i){return i.map(t=>li(t)?t:e=>t.validate(e))}function Mt(i){if(!i)return null;let t=i.filter(Ct);return t.length==0?null:function(e){return Vt(Dt(e,t))}}function St(i){return i!=null?Mt(wt(i)):null}function Et(i){if(!i)return null;let t=i.filter(Ct);return t.length==0?null:function(e){let n=Dt(e,t).map(bt);return rt(n).pipe(it(Vt))}}function Ft(i){return i!=null?Et(wt(i)):null}function dt(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function At(i){return i._rawValidators}function xt(i){return i._rawAsyncValidators}function We(i){return i?Array.isArray(i)?i:[i]:[]}function Ee(i,t){return Array.isArray(i)?i.includes(t):i===t}function ct(i,t){let e=We(t);return We(i).forEach(r=>{Ee(e,r)||e.push(r)}),e}function ut(i,t){return We(t).filter(e=>!Ee(i,e))}var Fe=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=St(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ft(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Z=class extends Fe{name;get formDirective(){return null}get path(){return null}},ce=class extends Fe{_parent=null;name=null;valueAccessor=null},Ae=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},di={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},In=T(A({},di),{"[class.ng-submitted]":"isSubmitted"}),Ne=(()=>{class i extends Ae{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(c(ce,2))};static \u0275dir=N({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[U]})}return i})(),Oe=(()=>{class i extends Ae{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(c(Z,10))};static \u0275dir=N({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[U]})}return i})();var se="VALID",Me="INVALID",z="PENDING",ae="DISABLED",L=class{},xe=class extends L{value;source;constructor(t,e){super(),this.value=t,this.source=e}},le=class extends L{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},de=class extends L{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Y=class extends L{status;source;constructor(t,e){super(),this.status=t,this.source=e}},qe=class extends L{source;constructor(t){super(),this.source=t}},ze=class extends L{source;constructor(t){super(),this.source=t}};function It(i){return(Te(i)?i.validators:i)||null}function ci(i){return Array.isArray(i)?St(i):i||null}function Pt(i,t){return(Te(t)?t.asyncValidators:i)||null}function ui(i){return Array.isArray(i)?Ft(i):i||null}function Te(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function mi(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new fe(1e3,"");if(!n[e])throw new fe(1001,"")}function hi(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new fe(1002,"")})}var Ie=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return j(this.statusReactive)}set status(t){j(()=>this.statusReactive.set(t))}_status=oe(()=>this.statusReactive());statusReactive=ie(void 0);get valid(){return this.status===se}get invalid(){return this.status===Me}get pending(){return this.status==z}get disabled(){return this.status===ae}get enabled(){return this.status!==ae}errors;get pristine(){return j(this.pristineReactive)}set pristine(t){j(()=>this.pristineReactive.set(t))}_pristine=oe(()=>this.pristineReactive());pristineReactive=ie(!0);get dirty(){return!this.pristine}get touched(){return j(this.touchedReactive)}set touched(t){j(()=>this.touchedReactive.set(t))}_touched=oe(()=>this.touchedReactive());touchedReactive=ie(!1);get untouched(){return!this.touched}_events=new tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ct(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ct(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ut(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ut(t,this._rawAsyncValidators))}hasValidator(t){return Ee(this._rawValidators,t)}hasAsyncValidator(t){return Ee(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(T(A({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new de(!0,n))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new de(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(T(A({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new le(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new le(!0,n))}markAsPending(t={}){this.status=z;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Y(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(T(A({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ae,this.errors=null,this._forEachChild(r=>{r.disable(T(A({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new xe(this.value,n)),this._events.next(new Y(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(T(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=se,this._forEachChild(n=>{n.enable(T(A({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(T(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===se||this.status===z)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new xe(this.value,e)),this._events.next(new Y(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(T(A({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ae:se}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=z,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let n=bt(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new Y(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new q,this.statusChanges=new q}_calculateStatus(){return this._allControlsDisabled()?ae:this.errors?Me:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(z)?z:this._anyControlsHaveStatus(Me)?Me:se}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new le(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new de(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Te(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=ci(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ui(this._rawAsyncValidators)}},K=class extends Ie{constructor(t,e,n){super(It(e),Pt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){hi(this,!0,t),Object.keys(t).forEach(n=>{mi(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,d)=>{n=e(n,r,d)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var kt=new H("",{providedIn:"root",factory:()=>Xe}),Xe="always";function pi(i,t){return[...t.path,i]}function mt(i,t,e=Xe){Je(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),gi(i,t),_i(i,t),vi(i,t),fi(i,t)}function ht(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),ke(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Pe(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function fi(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Je(i,t){let e=At(i);t.validator!==null?i.setValidators(dt(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=xt(i);t.asyncValidator!==null?i.setAsyncValidators(dt(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Pe(t._rawValidators,r),Pe(t._rawAsyncValidators,r)}function ke(i,t){let e=!1;if(i!==null){if(t.validator!==null){let r=At(i);if(Array.isArray(r)&&r.length>0){let d=r.filter(F=>F!==t.validator);d.length!==r.length&&(e=!0,i.setValidators(d))}}if(t.asyncValidator!==null){let r=xt(i);if(Array.isArray(r)&&r.length>0){let d=r.filter(F=>F!==t.asyncValidator);d.length!==r.length&&(e=!0,i.setAsyncValidators(d))}}}let n=()=>{};return Pe(t._rawValidators,n),Pe(t._rawAsyncValidators,n),e}function gi(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Nt(i,t)})}function vi(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Nt(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function Nt(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function _i(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function yi(i,t){i==null,Je(i,t)}function Ci(i,t){return ke(i,t)}function bi(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Vi(i){return Object.getPrototypeOf(i.constructor)===Kt}function Di(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function wi(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(d=>{d.constructor===X?e=d:Vi(d)?n=d:r=d}),r||n||e||null}function Mi(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function pt(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function ft(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var J=class extends Ie{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,n){super(It(e),Pt(n,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Te(e)&&(e.nonNullable||e.initialValueIsDefault)&&(ft(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){pt(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){pt(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){ft(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Si=i=>i instanceof J;var Re=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=N({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})();var Ot=new H("");var Ei={provide:Z,useExisting:te(()=>ue)},ue=(()=>{class i extends Z{callSetDisabledState;get submitted(){return j(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=oe(()=>this._submittedReactive());_submittedReactive=ie(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new q;constructor(e,n,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ke(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return mt(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){ht(e.control||null,e,!1),Mi(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this._submittedReactive.set(!0),Di(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new qe(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0,n={}){this.form.reset(e,n),this._submittedReactive.set(!1),n?.emitEvent!==!1&&this.form._events.next(new ze(this.form))}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,r=this.form.get(e.path);n!==r&&(ht(n||null,e),Si(r)&&(mt(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);yi(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&Ci(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Je(this.form,this),this._oldForm&&ke(this._oldForm,this)}static \u0275fac=function(n){return new(n||i)(c(Ke,10),c(_t,10),c(kt,8))};static \u0275dir=N({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&h("submit",function(F){return r.onSubmit(F)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[re([Ei]),U,ge]})}return i})();var Fi={provide:ce,useExisting:te(()=>me)},me=(()=>{class i extends ce{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new q;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,n,r,d,F){super(),this._ngModelWarningConfig=F,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=wi(this,d)}ngOnChanges(e){this._added||this._setUpControl(),bi(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return pi(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||i)(c(Z,13),c(Ke,10),c(_t,10),c(vt,10),c(Ot,8))};static \u0275dir=N({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[re([Fi]),U,ge]})}return i})();function Ai(i){return typeof i=="number"?i:parseInt(i,10)}var xi=(()=>{class i{_validator=Se;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Se,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=N({type:i,features:[ge]})}return i})();var Ii={provide:Ke,useExisting:te(()=>he),multi:!0},he=(()=>{class i extends xi{maxlength;inputName="maxlength";normalizeInput=e=>Ai(e);createValidator=e=>yt(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=je(i)))(r||i)}})();static \u0275dir=N({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&ve("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[re([Ii]),U]})}return i})();var Pi=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=W({type:i});static \u0275inj=$({})}return i})();var Tt=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Ot,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:kt,useValue:e.callSetDisabledState??Xe}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=W({type:i});static \u0275inj=$({imports:[Pi]})}return i})();var Ni=(i,t)=>t.id;function Oi(i,t){if(i&1){let e=y();o(0,"div",21)(1,"button",22),h("click",function(){v(e);let r=f().$implicit,d=f();return _(d.confirmDeleteComment(r))}),u(2,"i",23),s()()}}function Ti(i,t){if(i&1&&(o(0,"div",12),u(1,"img",3),o(2,"div",15)(3,"div",16)(4,"div",17)(5,"strong"),l(6),s()(),o(7,"div",17)(8,"small",18),l(9),Ce(10,"date"),s()()(),o(11,"div",19)(12,"div",20)(13,"span"),l(14),s()(),V(15,Oi,3,0,"div",21),s()()()),i&2){let e=t.$implicit,n=f();a(),m("alt",M(e.user.username))("src",e.user.avatar,w),a(5),b(e.user.username),a(3),b(be(10,7,e.createdAt,"MMM d, y h:mm a")),a(5),b(e.comment),a(),D(e.user.username==n.user.username?15:-1)}}function Ri(i,t){i&1&&(o(0,"div",13)(1,"div",24),l(2," There are no comments yet! "),s()())}function Ui(i,t){if(i&1){let e=y();o(0,"small",14)(1,"button",25),h("click",function(){v(e);let r=f();return _(r.loadMoreComments())}),l(2,"More Comments"),s()()}if(i&2){let e=f();a(),m("disabled",!e.hasMoreComments)}}var Ut=(()=>{class i{constructor(e,n,r,d){this.authService=e,this.http=n,this.popupService=r,this.toastService=d,this.comments=[],this.nextPage=1,this.addingComment=!1,this.hasMoreComments=!1,this.inProgress=!1,this.commentForm=new K({postId:new J(""),comment:new J("",[B.required,B.maxLength(255)])})}ngOnInit(){this.resetComments(),this.user=this.authService.getUser()}resetComments(){this.nextPage=1,this.comments=[],this.hasMoreComments=!1}addComment(){this.addingComment||(this.addingComment=!0,this.commentForm.patchValue({postId:this.post.id}),this.http.post(p.comments,this.commentForm.value).subscribe({next:e=>{this.post.commentsCount++,this.loadComments(),this.toastService.showSuccess(`Comment "${this.commentForm.value.comment.substring(0,30)}..." has been added successfully!`),this.commentForm.reset(),this.addingComment=!1},error:e=>{console.error("Failed to add comment on the post:",e),this.toastService.showError(`Failed to add comment on the post. ${e.error.message}. Please try again.`),this.addingComment=!1}}))}loadComments(e){let n=!1;e&&(n=e.currentTarget.getAttribute("aria-expanded")==="false"),!(this.inProgress||n)&&(this.inProgress=!0,this.resetComments(),this.http.get(p.postComments.replace("{1}",this.post.id)).subscribe({next:r=>{this.comments=r.content,this.inProgress=!1,this.hasMoreComments=!r.last},error:r=>{console.error("Failed to fetch post comments:",r),this.toastService.showError(`Failed to fetch post comments. ${r.message}. Please try again.`),this.inProgress=!1}}))}loadMoreComments(){this.http.get(p.postComments.replace("{1}",this.post.id),{page:this.nextPage}).subscribe({next:e=>{e.first?this.comments=e.content:this.comments=this.comments.concat(e.content),this.hasMoreComments=!e.last,this.hasMoreComments&&this.nextPage++},error:e=>{console.error("Failed to fetch more post comments:",e),this.toastService.showError(`Failed to fetch more post comments. ${e.message}. Please try again.`)}})}confirmDeleteComment(e){this.popupService.open({title:"Confirm Deletion",type:"error",message:`Are you sure you want to delete the comment "${e.comment.substring(0,30)}..."?
      This action cannot be undone.`,confirmButtonText:"Yes",cancelButtonText:"No"}).then(n=>{n?this.deleteComment(e):this.toastService.showInfo("Comment deletion cancelled.")})}deleteComment(e){this.http.delete(p.comment.replace("{1}",e.id)).subscribe({next:n=>{this.toastService.showSuccess(`Comment "${e.comment.substring(0,30)}..." has been deleted successfully!`),this.comments=this.comments.filter(r=>r.id!==e.id)},error:n=>{console.error("Failed to delete comment:",n),this.toastService.showError(`Failed to delete the comment. ${n.message}. Please try again.`)}})}static{this.\u0275fac=function(n){return new(n||i)(c(E),c(S),c(G),c(P))}}static{this.\u0275cmp=g({type:i,selectors:[["app-comments"]],inputs:{post:"post"},standalone:!1,decls:23,vars:17,consts:[["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"collapse",3,"id"],[1,"d-flex","align-items-center","mt-3","mb-2"],["width","48","height","48",1,"me-3","rounded-circle","border-0",3,"src","alt"],[1,"row","py-2","mb-0","small","lh-sm","border-bottom","w-100",3,"formGroup"],[1,"col","form-floating","pe-0"],["formControlName","comment","placeholder","What do you think about this post?","id","comment-area","rows","1","maxlength","255",1,"form-control","h-auto"],["for","comment-area",1,"mx-2","text-secondary"],[1,"text-muted","small","position-absolute","bottom-0","end-0","me-2","mb-1"],[1,"col-auto","d-flex","align-items-center"],["type","button",1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"mxh-500px","overflow-scroll"],[1,"d-flex","align-items-center"],[1,"d-flex","text-end"],[1,"d-block","text-end"],[1,"w-100","py-2"],[1,"row","small","lh-sm"],[1,"col"],[1,"text-muted","float-end"],[1,"row","small","lh-sm","border-bottom","py-2"],[1,"col","pe-0"],[1,"col-auto","my-auto"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash-alt"],[1,"w-100","py-1","small","text-muted"],[1,"btn","btn-sm","btn-link",3,"click","disabled"]],template:function(n,r){if(n&1&&(o(0,"button",0),h("click",function(F){return r.loadComments(F)}),u(1,"i"),l(2),s(),o(3,"div",1)(4,"div",2),u(5,"img",3),o(6,"form",4)(7,"div",5),u(8,"textarea",6),o(9,"label",7),l(10,"What do you think about this post?"),s(),o(11,"span",8)(12,"small"),l(13),s()()(),o(14,"div",9)(15,"button",10),h("click",function(){return r.addComment()}),u(16,"i"),l(17," Comment "),s()()()(),o(18,"div",11),x(19,Ti,16,10,"div",12,Ni),V(21,Ri,3,0,"div",13)(22,Ui,3,1,"small",14),s()()),n&2){let d;m("disabled",r.inProgress),ve("data-bs-target","#post-"+r.post.id+"-comments")("aria-controls","post-"+r.post.id+"-comments"),a(),ne(r.inProgress?"fas fa-spinner fa-spin":"fas fa-comment"),a(),C(" Comments (",r.post.commentsCount,")"),a(),m("id",st("post-",r.post.id,"-comments")),a(2),m("alt",M(r.user.username))("src",r.user.avatar,w),a(),m("formGroup",r.commentForm),a(7),C("",((d=r.commentForm.get("comment"))==null||d.value==null?null:d.value.length)||0,"/225"),a(2),m("disabled",!r.commentForm.valid||r.addingComment),a(),ne(r.addingComment?"fas fa-spinner fa-spin":"fas fa-pencil-alt"),a(3),I(r.comments),a(2),D(r.comments.length?r.hasMoreComments?22:-1:21)}},dependencies:[Re,X,Ne,Oe,he,ue,me,Ve],encapsulation:2})}}return i})();function Gi(i,t){if(i&1){let e=y();o(0,"div",8)(1,"button",12),h("click",function(){v(e);let r=f();return _(r.confirmDeletePost())}),u(2,"i",13),l(3," Delete "),s()()}}var Ue=(()=>{class i{constructor(e,n,r,d){this.authService=e,this.http=n,this.popupService=r,this.toastService=d,this.postDeleted=new q,this.inProgress=!1}ngOnInit(){this.user=this.authService.getUser()}likePost(){this.inProgress||(this.inProgress=!0,this.http.put(p.like.replace("{1}",this.post.id),{}).subscribe({next:e=>{this.toastService.showSuccess(`Post ${e.likes>this.post.likes?"liked":"unliked"} successfully!`),this.post.likes=e.likes,this.inProgress=!1},error:e=>{console.error("Failed to like post:",e),this.toastService.showError(`Failed to like post. ${e.message}. Please try again.`),this.inProgress=!1}}))}confirmDeletePost(){this.popupService.open({title:"Confirm Deletion",type:"error",message:`Are you sure you want to delete the post "${this.post.body.substring(0,30)}..."?
      All the comments will be deleted as well. This action cannot be undone.`,confirmButtonText:"Yes, Delete",cancelButtonText:"No, Keep It"}).then(e=>{e?this.deletePost():this.toastService.showInfo("Post deletion cancelled.")})}deletePost(){this.http.delete(p.post.replace("{1}",this.post.id)).subscribe({next:e=>{this.toastService.showSuccess(`Post "${this.post.body.substring(0,30)}..." has been deleted successfully!`),this.postDeleted.emit(this.post.id)},error:e=>{console.error("Failed to delete post:",e),this.toastService.showError(`Failed to delete the post. ${e.message}. Please try again.`)}})}static{this.\u0275fac=function(n){return new(n||i)(c(E),c(S),c(G),c(P))}}static{this.\u0275cmp=g({type:i,selectors:[["app-post"]],inputs:{post:"post"},outputs:{postDeleted:"postDeleted"},standalone:!1,decls:18,vars:15,consts:[[1,"card","rounded-3","border","shadow-lg","mt-2"],[1,"card-body"],[1,"row","g-0","align-items-center"],[1,"col-2"],[1,"img-thumbnail","rounded-circle","border-0","p-xl-3","p-xs-2",3,"src","alt"],[1,"col","my-auto","ps-xl-1","ps-2"],[1,"mb-0"],[1,"text-muted","ms-auto"],[1,"col-auto","my-auto","d-flex","justify-content-end"],[1,"card-text","pt-2","mxh-300px","overflow-scroll"],["type","button",1,"btn","btn-sm","btn-primary","me-2",3,"click","disabled"],[3,"post"],["type","button",1,"btn","btn-sm","btn-outline-danger","me-2","me-md-3",3,"click"],[1,"fas","fa-trash-alt"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"img",4),s(),o(5,"div",5)(6,"h6",6),l(7),s(),o(8,"small",7),l(9),Ce(10,"date"),s()(),V(11,Gi,4,0,"div",8),s(),o(12,"p",9),l(13),s(),o(14,"button",10),h("click",function(){return r.likePost()}),u(15,"i"),l(16),s(),u(17,"app-comments",11),s()()),n&2&&(a(4),m("alt",M(r.post.user.username))("src",r.post.user.avatar,w),a(3),b(r.post.user.username),a(2),b(be(10,12,r.post.createdAt,"MMM d, y h:mm a")),a(2),D(r.post.user.username==r.user.username?11:-1),a(2),b(r.post.body),a(),m("disabled",r.inProgress),a(),ne(r.inProgress?"fas fa-spinner fa-spin":"fas fa-thumbs-up"),a(),C(" Likes (",r.post.likes,") "),a(),m("post",r.post))},dependencies:[Ut,Ve],encapsulation:2})}}return i})();function Bi(i,t){if(i&1){let e=y();o(0,"div",13),u(1,"img",17),o(2,"div",18)(3,"div",19)(4,"div",20)(5,"strong",21),l(6),s(),o(7,"span",22),l(8),s()(),o(9,"button",23),h("click",function(){let r=v(e).$implicit,d=f();return _(d.confirmUnfollowUser(r.username))}),u(10,"i",24),l(11," Unfollow "),s()()()()}if(i&2){let e=t.$implicit;a(),m("alt",M(e.username))("src",e.avatar,w),a(5),O("",e.firstName," ",e.lastName),a(2),b(e.username)}}function Li(i,t){i&1&&(o(0,"div",14)(1,"div",25),l(2," You are following nobody! "),s()())}var Gt=(()=>{class i{constructor(e,n,r,d){this.authService=e,this.http=n,this.popupService=r,this.toastService=d,this.friends=R.defaultPageResponse}ngOnInit(){this.user=this.authService.getUser(),this.getFriends()}getFriends(){this.http.getList(p.friends).subscribe(e=>{this.friends=e})}loadMore(){this.http.getList(p.friends,{page:this.friends.number+1}).subscribe(e=>{let n=this.friends.content;this.friends=e,this.friends.content=n.concat(this.friends.content)})}confirmUnfollowUser(e){this.popupService.open({title:"Confirm Unfollow",type:"error",message:`Are you sure you want to unfollow the user "${e}"? You can follow then again.`,confirmButtonText:"Yes",cancelButtonText:"No"}).then(n=>{n?this.unfollowUser(e):this.toastService.showInfo("User unfollow cancelled.")})}unfollowUser(e){this.http.put(p.unfollow.replace("{1}",e),{}).subscribe({next:n=>{this.toastService.showSuccess(`User "${e}" has been unfollowed successfully!`),location.reload()},error:n=>{console.error("Failed to unfollow user:",n),this.toastService.showError(`Failed to unfollow the user. ${n.message}. Please try again.`)}})}static{this.\u0275fac=function(n){return new(n||i)(c(E),c(S),c(G),c(P))}}static{this.\u0275cmp=g({type:i,selectors:[["app-left-sidebar"]],standalone:!1,decls:29,vars:10,consts:[[1,"card","rounded-3","border","shadow-lg"],[1,"card-body"],[1,"card-title","text-center"],[1,"img-thumbnail","rounded-circle","d-block","mx-auto",3,"src","alt"],[1,"card-text","mt-2","border-top"],[1,"list-group"],[1,"list-group-item","border-0"],[1,"fa","fa-user","pe-2"],[1,"fas","fa-pencil-alt","pe-2"],[1,"far","fa-envelope","pe-2"],[1,"fas","fa-home","pe-2"],[1,"card","rounded-3","border","shadow-lg","my-2"],[1,"card-title","text-center","pb-2","border-bottom"],[1,"d-flex","align-items-center"],[1,"d-flex"],[1,"d-block","text-end","mt-3"],[1,"btn","btn-sm","btn-link",3,"click","disabled"],["width","48","height","48",1,"me-3","rounded-circle","border-0",3,"src","alt"],[1,"py-2","mb-0","small","lh-sm","border-bottom","w-100"],[1,"d-flex","justify-content-between"],[1,"text-truncate"],[1,"text-gray-dark"],[1,"text-muted","d-block"],[1,"btn","btn-sm","text-danger","text-decoration-none","my-auto",3,"click"],[1,"fas","fa-trash"],[1,"py-3","mb-0","small","lh-sm","border-bottom","w-100","text-muted"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"h5",2),l(3,"My Profile"),s(),u(4,"img",3),o(5,"div",4)(6,"ul",5)(7,"li",6),u(8,"i",7),l(9),s(),o(10,"li",6),u(11,"i",8),l(12),s(),o(13,"li",6),u(14,"i",9),l(15),s(),o(16,"li",6),u(17,"i",10),l(18),s()()()()(),o(19,"div",11)(20,"div",1)(21,"h5",12),l(22,"Following"),s(),x(23,Bi,12,6,"div",13,_e),V(25,Li,3,0,"div",14),o(26,"small",15)(27,"button",16),h("click",function(){return r.loadMore()}),l(28,"More Friends"),s()()()()),n&2&&(a(4),m("alt",M(r.user.username))("src",r.user.avatar,w),a(5),O(" ",r.user.firstName," ",r.user.lastName),a(3),C(" ",r.user.username),a(3),C(" ",r.user.email),a(3),C(" ",r.user.location),a(5),I(r.friends.content),a(2),D(!r.friends||!r.friends.content.length?25:-1),a(2),m("disabled",!r.friends||r.friends.last))},encapsulation:2})}}return i})();function Hi(i,t){if(i&1){let e=y();o(0,"div",3),u(1,"img",7),o(2,"div",8)(3,"div",9)(4,"div",10)(5,"strong",11),l(6),s(),o(7,"span",12),l(8),s()(),o(9,"a",13),h("click",function(){let r=v(e).$implicit,d=f();return _(d.followUser(r.username))}),u(10,"i",14),l(11," Follow "),s()()()()}if(i&2){let e=t.$implicit;a(),m("alt",M(e.username))("src",e.avatar,w),a(5),O("",e.firstName," ",e.lastName),a(2),b(e.username)}}function Wi(i,t){i&1&&(o(0,"div",4)(1,"div",15),l(2," You are following everybody! "),s()())}var Lt=(()=>{class i{constructor(e,n){this.authService=e,this.http=n}ngOnInit(){this.suggestions=R.defaultPageResponse,this.getFriends()}getFriends(){this.http.getList(p.suggestions).subscribe(e=>{this.suggestions=e})}followUser(e){this.http.put(p.follow.replace("{1}",e),{}).subscribe(()=>{location.reload()})}loadMore(){this.http.getList(p.suggestions,{page:this.suggestions.number+1}).subscribe(e=>{let n=this.suggestions.content;this.suggestions=e,this.suggestions.content=n.concat(this.suggestions.content)})}static{this.\u0275fac=function(n){return new(n||i)(c(E),c(S))}}static{this.\u0275cmp=g({type:i,selectors:[["app-right-sidebar"]],standalone:!1,decls:10,vars:2,consts:[[1,"card","rounded-3","border","shadow-lg"],[1,"card-body"],[1,"card-title","text-center","pb-2","border-bottom"],[1,"d-flex","align-items-center"],[1,"d-flex"],[1,"d-block","text-end","mt-3"],[1,"btn","btn-sm","btn-link",3,"click","disabled"],["width","48","height","48",1,"me-3","rounded-circle","border-0",3,"src","alt"],[1,"py-2","mb-0","small","lh-sm","border-bottom","w-100"],[1,"d-flex","justify-content-between"],[1,"text-truncate"],[1,"text-gray-dark"],[1,"text-muted","d-block"],["routerLink","#",1,"text-decoration-none","my-auto",3,"click"],[1,"fas","fa-shoe-prints"],[1,"py-3","mb-0","small","lh-sm","border-bottom","w-100","text-muted"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"h5",2),l(3,"Follow People"),s(),x(4,Hi,12,6,"div",3,_e),V(6,Wi,3,0,"div",4),o(7,"small",5)(8,"button",6),h("click",function(){return r.loadMore()}),l(9,"More Suggestions"),s()()()()),n&2&&(a(4),I(r.suggestions.content),a(2),D(!r.suggestions||!r.suggestions.content.length?6:-1),a(2),m("disabled",!r.suggestions||r.suggestions.last))},dependencies:[we],encapsulation:2})}}return i})();var zi=(i,t)=>t.id;function Yi(i,t){if(i&1){let e=y();o(0,"app-post",17),h("postDeleted",function(r){v(e);let d=f();return _(d.onPostDeleted(r))}),s()}if(i&2){let e=t.$implicit;m("post",e)}}function Zi(i,t){i&1&&(o(0,"div",14)(1,"div",18),l(2," You don't have any posts! "),s()())}function Ki(i,t){if(i&1){let e=y();o(0,"small",15)(1,"button",19),h("click",function(){v(e);let r=f();return _(r.loadMorePosts())}),l(2,"See More Posts"),s()()}if(i&2){let e=f();a(),m("disabled",e.posts.last)}}var $t=(()=>{class i{constructor(e,n,r){this.authService=e,this.http=n,this.toastService=r,this.posts=R.defaultPageResponse,this.postForm=new K({body:new J("",[B.required,B.maxLength(4096)])})}ngOnInit(){this.user=this.authService.getUser(),this.getPosts()}getPosts(){this.http.getList(p.posts).subscribe(e=>{this.posts=e})}loadMorePosts(){this.http.getList(p.userPosts,{page:this.posts.number+1}).subscribe(e=>{let n=this.posts.content;this.posts=e,this.posts.content=n.concat(this.posts.content)})}addPost(){this.http.post(p.posts,this.postForm.value).subscribe({next:e=>{this.toastService.showSuccess(`Post "${this.postForm.value.body.substring(0,30)}..." has been added successfully!`),this.getPosts(),this.postForm.reset()},error:e=>{console.error("Failed to add post:",e),this.toastService.showError(`Failed to add post. ${e.message}. Please try again.`)}})}onPostDeleted(e){this.posts.content=this.posts.content.filter(n=>n.id!==e)}static{this.\u0275fac=function(n){return new(n||i)(c(E),c(S),c(P))}}static{this.\u0275cmp=g({type:i,selectors:[["app-feed"]],standalone:!1,decls:25,vars:4,consts:[[1,"row"],[1,"col-md-3"],[1,"col-md-6"],[1,"card","rounded-3","border","shadow-lg"],[1,"card-body"],[3,"formGroup"],[1,"form-floating"],["formControlName","body","placeholder","Something's on your mind?","id","post-area","rows","3","maxlength","4096",1,"form-control","h-auto"],["for","post-area"],[1,"text-muted","small","position-absolute","bottom-0","end-0","me-2","mb-1"],["type","button",1,"btn","btn-primary","mt-2","float-end",3,"click","disabled"],[1,"fas","fa-pencil-alt"],[3,"post"],[1,"row","mt-3"],[1,"d-flex","text-end"],[1,"text-end"],[1,"mt-2"],[3,"postDeleted","post"],[1,"w-100","py-1","small","text-muted"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(n,r){if(n&1&&(o(0,"div",0)(1,"div",1),u(2,"app-left-sidebar"),s(),o(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5)(7,"div",6),u(8,"textarea",7),o(9,"label",8),l(10,"Something's on your mind?"),s(),o(11,"span",9)(12,"small"),l(13),s()()(),o(14,"button",10),h("click",function(){return r.addPost()}),u(15,"i",11),l(16," Post "),s()()()(),x(17,Yi,1,1,"app-post",12,zi),o(19,"div",13),V(20,Zi,3,0,"div",14)(21,Ki,3,1,"small",15),s(),u(22,"div",16),s(),o(23,"div",1),u(24,"app-right-sidebar"),s()()),n&2){let d;a(6),m("formGroup",r.postForm),a(7),C("",((d=r.postForm.get("body"))==null||d.value==null?null:d.value.length)||0,"/4096"),a(),m("disabled",!r.postForm.valid),a(3),I(r.posts.content),a(3),D(r.posts.numberOfElements===0?20:r.posts.last?-1:21)}},dependencies:[Re,X,Ne,Oe,he,ue,me,Ue,Gt,Lt],encapsulation:2})}}return i})();var Ht=(()=>{class i{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=g({type:i,selectors:[["app-social"]],standalone:!1,decls:2,vars:0,consts:[[1,"px-3","py-4"]],template:function(n,r){n&1&&(o(0,"div",0),u(1,"router-outlet"),s())},dependencies:[De],encapsulation:2})}}return i})();var et=()=>({exact:!0}),Wt=(()=>{class i{constructor(e){this.authService=e}ngOnInit(){this.user=this.authService.getUser()}static{this.\u0275fac=function(n){return new(n||i)(c(E))}}static{this.\u0275cmp=g({type:i,selectors:[["app-profile"]],standalone:!1,decls:42,vars:14,consts:[[1,"row"],[1,"col-md-3"],[1,"card","rounded-3","border","shadow-lg"],[1,"card-body"],[1,"card-title","text-center"],[1,"img-thumbnail","rounded-circle","d-block","mx-auto",3,"src","alt"],[1,"card-text","mt-2","border-top"],[1,"list-group"],[1,"list-group-item","border-0"],[1,"fa","fa-user","pe-2"],[1,"fas","fa-pencil-alt","pe-2"],[1,"far","fa-envelope","pe-2"],[1,"fas","fa-home","pe-2"],[1,"col-md-9"],[1,"container"],[1,"nav","nav-tabs"],[1,"nav-item"],["aria-current","page","routerLink","/my/profile","routerLinkActive","active",1,"nav-link","active",3,"routerLinkActiveOptions"],["routerLink","/my/profile/posts","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/my/profile/friends","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["aria-disabled","true",1,"nav-link","disabled"],[1,"row","my-3"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),l(5,"My Profile"),s(),u(6,"img",5),o(7,"div",6)(8,"ul",7)(9,"li",8),u(10,"i",9),l(11),s(),o(12,"li",8),u(13,"i",10),l(14),s(),o(15,"li",8),u(16,"i",11),l(17),s(),o(18,"li",8),u(19,"i",12),l(20),s()()()()()(),o(21,"div",13)(22,"div",2)(23,"div",3)(24,"div",14)(25,"div",0)(26,"ul",15)(27,"li",16)(28,"a",17),l(29,"Edit Profile"),s()(),o(30,"li",16)(31,"a",18),l(32,"Posts"),s()(),o(33,"li",16)(34,"a",19),l(35,"Friends"),s()(),o(36,"li",16)(37,"a",20),l(38,"Messages"),s()()()(),u(39,"div",21),o(40,"div",0),u(41,"router-outlet"),s()()()()()()),n&2&&(a(6),m("alt",M(r.user.username))("src",r.user.avatar,w),a(5),O(" ",r.user.firstName," ",r.user.lastName," "),a(3),C(" ",r.user.username),a(3),C(" ",r.user.email),a(3),C(" ",r.user.location),a(8),m("routerLinkActiveOptions",ye(11,et)),a(3),m("routerLinkActiveOptions",ye(12,et)),a(3),m("routerLinkActiveOptions",ye(13,et)))},dependencies:[De,we,lt],encapsulation:2})}}return i})();var Xi=(i,t)=>t.id;function Ji(i,t){if(i&1){let e=y();o(0,"app-post",4),h("postDeleted",function(r){v(e);let d=f();return _(d.onPostDeleted(r))}),s()}if(i&2){let e=t.$implicit;m("post",e)}}function Qi(i,t){i&1&&(o(0,"div",2)(1,"div",5),l(2," You don't have any posts! "),s()())}function en(i,t){if(i&1){let e=y();o(0,"small",3)(1,"button",6),h("click",function(){v(e);let r=f();return _(r.loadMorePosts())}),l(2,"See More Posts"),s()()}if(i&2){let e=f();a(),m("disabled",e.posts.last)}}var qt=(()=>{class i{constructor(e,n){this.http=e,this.toastService=n,this.posts=R.defaultPageResponse}ngOnInit(){this.getUserPosts()}getUserPosts(){this.http.getList(p.userPosts).subscribe(e=>{this.posts=e})}loadMorePosts(){this.http.getList(p.userPosts,{page:this.posts.number+1}).subscribe(e=>{let n=this.posts.content;this.posts=e,this.posts.content=n.concat(this.posts.content)})}onPostDeleted(e){this.posts.content=this.posts.content.filter(n=>n.id!==e)}static{this.\u0275fac=function(n){return new(n||i)(c(S),c(P))}}static{this.\u0275cmp=g({type:i,selectors:[["app-user-posts"]],standalone:!1,decls:5,vars:1,consts:[[3,"post"],[1,"row","mt-3"],[1,"d-flex","text-end"],[1,"text-end"],[3,"postDeleted","post"],[1,"w-100","py-1","small","text-muted"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(n,r){n&1&&(x(0,Ji,1,1,"app-post",0,Xi),o(2,"div",1),V(3,Qi,3,0,"div",2)(4,en,3,1,"small",3),s()),n&2&&(I(r.posts.content),a(3),D(r.posts.numberOfElements===0?3:r.posts.last?-1:4))},dependencies:[Ue],encapsulation:2})}}return i})();var zt=(()=>{class i{constructor(e){this.authService=e}ngOnInit(){this.user=this.authService.getUser()}static{this.\u0275fac=function(n){return new(n||i)(c(E))}}static{this.\u0275cmp=g({type:i,selectors:[["app-user-profile"]],standalone:!1,decls:33,vars:5,consts:[[1,"row"],[1,"col-12"],[1,"card-title","py-3"],[1,"col-md-6"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"h5",2),l(3,"My Profile"),s()(),o(4,"div",1)(5,"div",0)(6,"div",3)(7,"label"),l(8,"Username"),s()(),o(9,"div",3)(10,"p"),l(11),s()()(),o(12,"div",0)(13,"div",3)(14,"label"),l(15,"Name"),s()(),o(16,"div",3)(17,"p"),l(18),s()()(),o(19,"div",0)(20,"div",3)(21,"label"),l(22,"Email"),s()(),o(23,"div",3)(24,"p"),l(25),s()()(),o(26,"div",0)(27,"div",3)(28,"label"),l(29,"Location"),s()(),o(30,"div",3)(31,"p"),l(32),s()()()()()),n&2&&(a(11),b(r.user.username),a(7),O("",r.user.firstName," ",r.user.lastName),a(7),b(r.user.email),a(7),b(r.user.location))},encapsulation:2})}}return i})();var tn=(i,t)=>t.username;function nn(i,t){if(i&1){let e=y();o(0,"div",1)(1,"div",5),u(2,"img",6),o(3,"div",7)(4,"p",8)(5,"strong"),l(6),s(),l(7),s(),o(8,"div",9)(9,"div",10)(10,"button",11),l(11,"View"),s(),o(12,"button",12),h("click",function(){let r=v(e).$implicit,d=f();return _(d.confirmUnfollowUser(r.username))}),l(13,"Unfollow "),s()()()()()()}if(i&2){let e=t.$implicit;a(2),m("alt",M(e.username))("src",e.avatar,w),a(4),O("",e.firstName," ",e.lastName),a(),C(" (",e.username,") ")}}function rn(i,t){i&1&&(o(0,"div",3)(1,"div",13),l(2," You are not following anyone yet! "),s()())}function on(i,t){if(i&1){let e=y();o(0,"small",4)(1,"button",14),h("click",function(){v(e);let r=f();return _(r.loadMoreFriends())}),l(2,"See More Friends"),s()()}if(i&2){let e=f();a(),m("disabled",e.friends.last)}}var Yt=(()=>{class i{constructor(e,n,r){this.http=e,this.popupService=n,this.toastService=r,this.friends=R.defaultPageResponse}ngOnInit(){this.getFriends()}getFriends(){this.http.getList(p.friends).subscribe(e=>{this.friends=e})}loadMoreFriends(){this.http.getList(p.friends,{page:this.friends.number+1}).subscribe(e=>{let n=this.friends.content;this.friends=e,this.friends.content=n.concat(this.friends.content)})}confirmUnfollowUser(e){this.popupService.open({title:"Confirm Unfollow",type:"error",message:`Are you sure you want to unfollow the user "${e}"? You can follow then again.`,confirmButtonText:"Yes",cancelButtonText:"No"}).then(n=>{n?this.unfollowUser(e):this.toastService.showInfo("User unfollow cancelled.")})}unfollowUser(e){this.http.put(p.unfollow.replace("{1}",e),{}).subscribe({next:n=>{this.toastService.showSuccess(`User "${e}" has been unfollowed successfully!`),this.friends.content=this.friends.content.filter(r=>r.username!==e)},error:n=>{console.error("Failed to unfollow user:",n),this.toastService.showError(`Failed to unfollow the user. ${n.message}. Please try again.`)}})}static{this.\u0275fac=function(n){return new(n||i)(c(S),c(G),c(P))}}static{this.\u0275cmp=g({type:i,selectors:[["app-user-friends"]],standalone:!1,decls:6,vars:1,consts:[[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-3"],[1,"col"],[1,"row"],[1,"d-flex","text-end"],[1,"d-block","text-end"],[1,"card","shadow-sm"],[1,"rounded-top","img-thumbnail",3,"src","alt"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],["type","button","disabled","disabled",1,"btn","btn-sm","btn-outline-primary"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"w-100","py-1","small","text-muted"],[1,"btn","btn-sm","btn-link",3,"click","disabled"]],template:function(n,r){n&1&&(o(0,"div",0),x(1,nn,14,6,"div",1,tn),s(),o(3,"div",2),V(4,rn,3,0,"div",3)(5,on,3,1,"small",4),s()),n&2&&(a(),I(r.friends.content),a(3),D(r.friends.numberOfElements===0?4:r.friends.last?-1:5))},encapsulation:2})}}return i})();var sn=[{path:"",component:Ht,children:[{path:"",component:$t},{path:"profile",component:Wt,children:[{path:"",component:zt},{path:"posts",component:qt},{path:"friends",component:Yt}]}]}],Zt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=W({type:i})}static{this.\u0275inj=$({imports:[He.forChild(sn),He]})}}return i})();var xr=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=W({type:i})}static{this.\u0275inj=$({imports:[at,Zt,Tt]})}}return i})();export{xr as SocialModule};
